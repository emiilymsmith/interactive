<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/pages.css">

    <!-- D3 --->
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    
    <title>Interactive Design</title>
  </head>

  <body>
    <!-- Navigation -->
    <div id="navigation">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <span class="navbar-brand mb-0 h1">EMS</span>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#sectionLink1">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#sectionLink2">Incidents and Response Time</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#sectionLink3">Pie Bar</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Static Images
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="#sectionLink4">Static Image 1</a>
                <a class="dropdown-item" href="#sectionLink5">Static Image 2</a>
                <a class="dropdown-item" href="#sectionLink6">Static Image 3</a>
                <a class="dropdown-item" href="#sectionLink7">Static Image 4</a>
                <a class="dropdown-item" href="#sectionLink8">Static Image 5</a>
                <a class="dropdown-item" href="#sectionLink9">Static Image 6</a>
                <a class="dropdown-item" href="#sectionLink10">Static Image 7</a>
                <a class="dropdown-item" href="#sectionLink11">Static Image 8</a>
                <a class="dropdown-item" href="#sectionLink12">Static Image 9</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#sectionLink13">Write-up</a>
            </li>
          </ul>
        </div>
      </nav>
    </div> <!-- end navigation -->

    <div class="container">
      <div class="section" id="section1">
        <!-- New Title Page --> 
        <div class="home-root" id="title">
          <h1 class="title has-text-centered">New York City</h1>
          <h2 class="subtitle has-text-centered">EMS Incident Dispatch Data</h2>
        </div> <!-- end title -->
      </div>

      <div class="section" id="section2">
        <div id="info">
        <h3>Incidents and Response Time</h3> </div>
        <div class="row">
          <!-- Select Panel / Left Column -->
          <div class="col" id="selectPanel">
            <form id="myForm">
              <label>Select first month of data</label>
              <select id="selectNumber"></select>
              <br>
              <label>Select last month of data</label>
              <select id="selectNumber2"></select>
              <br><br> <label>Warning: Data files are large, please be patient.</label>
            </form>
            <div id="spinner">
              <img id="spin" class="img-fluid" src="images/Loadingsome.gif">

            </div>
          </div>

          <!-- Map -->
          <div class="col-6" id="map"></div>

          <!-- Legend Panel / Right Column -->
          <div class="col" id="legendPanel">
            <div id="legendHolder">
              <span>Number of incidents reported in selected area(s):</span>
              <span id="count"></span><br>
              <span><br>Average response time (min):</span>
              <span id="avgResponseT"></span>
            </div>
            <img class="img-fluid" src="images/NewYorkMap.png">
          </div>
        </div><!-- end row -->

        <!-- info -->
        <div id="info">
          <br>
          <h3>Dispatch Data</h3>
          <h5>New York Boroughs</h5>
          <p>&emsp; New York City is divided into five divisions. The five divisions are: Manhattan, Brooklyn, Queens, The Bronx, and Staten Island.</p>
          <h5>Response Time</h5> 
          <p> &emsp; The average response time is the time between when an incident was created in the dispatch system and when the first unit arrived on location.  
          </p>
        </div>
      </div><!-- end of section 2-->

      <div class="section" id="section3">
        <h3>Pie Bar</h3>
        <div class="row" id="piebar"></div>

      </div><!-- end of section 3-->
      <br>

      <div class="section" id="section4">
        <div class="static-img" id="static"></div> 
          <h3><i>Static Image 1</i></h3>
          <img src="images/vis4.png" />
      </div><!-- end section 4 -->
      <br>

      <div class="section" id="section5">
        <div class="static-img" id="static"></div>
          <h3><i>Static Image 2</i></h3>  
          <img src="images/vis6.png" />
      </div><!-- end section 5 -->
      <br>

      <div class="section" id="section6">
      <div class="static-img" id="static"></div> 
        <h3><i>Static Image 3</i></h3>
        <img src="images/vis7.png" />
      </div><!-- end section 6 -->
      <br>

      <div class="section" id="section7">
        <div class="static-img" id="static"></div> 
        <h3><i>Static Image 4</i></h3>
        <img src="images/vis4.png" />
      </div><!-- end section 7 -->
      <br>

      <div class="section" id="section8">
        <div class="static-img" id="static"></div>
        <h3><i>Static Image 5</i></h3>  
        <img src="images/vis5.png" />
      </div><!-- end section 8 -->
      <br>

      <div class="section" id="section9">
        <div class="static-img" id="static"></div>
          <h3><i>Static Image 7</i></h3> 
          <img src="images/vis7.png" />
      </div><!-- end section 9 -->
      <br>

      <div class="section" id="section10">
        <div class="static-img" id="static"></div> 
          <h3><i>Static Image 8</i></h3>
          <img src="images/vis8.png" />
      </div><!-- end section 10 -->
      <br>

      <div class="section" id="section11">
        <div class="static-img" id="static"></div> 
          <h3><i>Static Image 9</i></h3>
          <img src="images/vis9.png" />
      </div><!-- end section 11 -->
      <br>

      <div class="section" id="section12">
        <div class="static-img" id="static"></div> 
          <h3><i>Static Image 10</i></h3>
          <img src="images/vis10.png" />
      </div> <!-- end section 12 -->
      <br>


      <!-- Write-up -->
      <div class="section" id="section13">
        <div id="writeUp">
          <br>
          <h3>Write-up</h3>
          <p>For our interactive design we chose to analyze the EMS Incident Dispatch Data for New York City, provided by the Fire Department of New York City. 
            As a group, we decided to use a map as our interactive graphic. We had considered a few other options, like a sunburst or bubble chart, but based 
            on the dataset that we have we felt that a map was the best way to convey our data. The tooltip is the guide to the map and shows the boroughs. The 
            dropdown lists the range of dates chronologically. We wanted our design to follow a familiar pattern of reading, and so we placed the first 
            aspect we wish the reader to see on the left. As they continue to scan the page and look to the middle, the data can be filtered through an 
            interatction on the map to display the results. We wanted to be able to select multiple boroughs at once to fully display the range of the data. 
            It was important for us to highlight what had been selected in order to show the exact area being examined. Red felt like the right color as 
            emergency responders correspond to red and white. We chose a minimalist approach in order to keep our visualization from becoming too overwhelming.</p>
            <p>The first step in the development process was displaying a simple static map. 
            We began by having the state of New York drawn before narrowing the map down to the specific areas we wanted to examine. Then we chose to add 
            specific features such as dropdowns for the desired range of months and to display the data. After that it was just a matter of adding any features 
            we thought would improve our visualization. We broke up the work initially into three categories: creating an interactive map, dividing the data 
            into modular files, and the front end. At first we were able to work seperately yet in tandem to complete these tasks. Collaboration was vital in the 
            later stages of development to bring all of the pieces together. We had to connect the sorted data to filter based on selections, then use that result 
            to clearly display information to the viewer. The final pieces were completed in person in order to finalize our vision and ensure we agreed on the result.</p>
            <p>Approximately twenty hours were spent developing the application. The aspects that took the most time were breaking up the csv file and updating the legend. 
            Since the data file is large, we had to divide the csv into multiple files in order to access the data. Using the csv with our data was a 
            relatively new process for the group. It was a steep learning curve figuring out how the parts worked together to create a dynamic visualization.  
          </p>
          <br><h6>Created by: Hannah Dolan, Nathan Raymond, Emily Smith</h6>
        </div>
      </div> <!-- end section 13-->


    </div> <!-- end container -->

    <script>
      var select = document.getElementById("selectNumber"); 
      var select2 = document.getElementById("selectNumber2"); 
      var filesList = ["1_2013-01-01.csv","2_2013-02-01.csv","3_2013-03-01.csv","4_2013-04-01.csv","5_2013-05-01.csv","6_2013-06-01.csv","7_2013-07-01.csv","8_2013-08-01.csv","9_2013-09-01.csv","10_2013-10-01.csv","11_2013-11-01.csv","12_2013-12-01.csv","13_2014-01-01.csv","14_2014-02-01.csv","15_2014-03-01.csv","16_2014-04-01.csv","17_2014-05-01.csv","18_2014-06-01.csv","19_2014-07-01.csv","20_2014-08-01.csv","21_2014-09-01.csv","22_2014-10-01.csv","23_2014-11-01.csv","24_2014-12-01.csv","25_2015-01-01.csv","26_2015-02-01.csv","27_2015-03-01.csv","28_2015-04-01.csv","29_2015-05-01.csv","30_2015-06-01.csv","31_2015-07-01.csv","32_2015-08-01.csv","33_2015-09-01.csv","34_2015-10-01.csv","35_2015-11-01.csv","36_2015-12-01.csv","37_2016-01-01.csv","38_2016-02-01.csv","39_2016-03-01.csv","40_2016-04-01.csv","41_2016-05-01.csv","42_2016-06-01.csv","43_2016-07-01.csv","44_2016-08-01.csv","45_2016-09-01.csv","46_2016-10-01.csv","47_2016-11-01.csv","48_2016-12-01.csv","49_2017-01-01.csv","50_2017-02-01.csv","51_2017-03-01.csv","52_2017-04-01.csv","53_2017-05-01.csv","54_2017-06-01.csv","55_2017-07-01.csv","56_2017-08-01.csv","57_2017-09-01.csv","58_2017-10-01.csv","59_2017-11-01.csv","60_2017-12-01.csv","61_2018-01-01.csv","62_2018-02-01.csv","63_2018-03-01.csv","64_2018-04-01.csv","65_2018-05-01.csv","66_2018-06-01.csv","67_2018-07-01.csv","68_2018-08-01.csv","69_2018-09-01.csv","70_2018-10-01.csv","71_2018-11-01.csv","72_2018-12-01.csv"];

      for(var i = 0; i < filesList.length; i++) {
          var opt = filesList[i];
          var el = document.createElement("option");
          var al = document.createElement("option");
          var string = opt.split("_")[1];
          string = string.split("-")[0] + "-" + string.split("-")[1];
          el.textContent = string;
          el.value = opt;
          al.textContent = string;
          al.value = opt;
          select.appendChild(el);
          select2.appendChild(al);
          
      }
      </script>

      <!-- bootstrap -->
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

      <!-- local javascript -->
      <script src="scripts/datum.js" type="text/javascript"></script> 
      <script src="scripts/navigation.js" type="text/javascript"></script> 
      <script src="scripts/ny.js" type="text/javascript"></script>
      <script src="scripts/piebar.js" type="text/javascript"></script>

  </body>
</html>